<head>
  <title>Virtual Machines</title>
</head>

<body>
	<nav class="navbar navbar-default">
		<div class="container">
			<a class="navbar-brand" href="#">
				Virtual Machines <span>(For Code For Eau Claire)</span>
			</a>
		</div>
	</nav>
	<div class="container">
		{{> main}}
		<br />
		<br />
		{{> authInstructions}}
		<br />
		<br />
		{{> info}}
	</div>
</body>


<template name="main">

	<h2>Your Virtual Machine</h2>
	{{#if ready}}
		IP: {{ip}}
		<br />
		<br />
		<h3>Connecting to your machine</h3>
		<h4>Mac / Linux</h4>
		<pre>ssh -i ~/.ssh/vms_id_rsa root@{{ip}}</pre>
		<br />
		<br />
		Machine will self destruct in {{selfDestructTimeLeftHuman}}
		<br />
		<br />
		<button>Give me a new machine</button>
	{{/if}}
	{{#unless ready}}
		<span class="spin-container">
			{{> spinner}}
		</span>
		{{loadingStatus}}
	{{/unless}}
</template>

<template name="authInstructions">
	<h2>Authentication Setup Instructions</h2>
	These Virtual Machines use public / private key encryption.
	<div class="panel panel-default">
		<div class="panel-body">
			<!-- Nav tabs -->
			<ul class="nav nav-tabs" role="tablist">
				<li role="presentation" class="active">
					<a href="#key" aria-controls="key" role="tab" data-toggle="tab">
						Raw Key
					</a>
				</li>
				<li role="presentation">
					<a href="#linux" aria-controls="linux" role="tab" data-toggle="tab">
						Linux / MacOS
					</a>
				</li>
				<li role="presentation">
					<a href="#windows" aria-controls="windows" role="tab" data-toggle="tab">
						Windows
					</a>
				</li>
			</ul>

			<!-- Tab panes -->
			<div class="tab-content">
				<div role="tabpanel" class="tab-pane active" id="key">
					<br />
					This is a raw private key that will connect you to the virtual machine.
					<br />
					If you're unsure what to do with it, click a tab for instructions on your opterating system.
					<br />
					<pre>{{privateKey}}</pre>
				</div>
				<div role="tabpanel" class="tab-pane" id="linux">
					<br />
					Save the private key
					<pre>echo "{{privateKey}}" > ~/.ssh/vms_id_rsa</pre>
					Set permissions
					<pre>chmod 0600 ~/.ssh/vms_id_rsa</pre>
				</div>
				<div role="tabpanel" class="tab-pane" id="windows">
					<br />
					Instructions here need work
					Maybe <a href="https://www.digitalocean.com/community/tutorials/how-to-connect-to-your-droplet-with-ssh">How To Connect To Your Machine with SSH</a> will help?
					<pre>{{privateKey}}</pre>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="info">
	<h3>About these virtual machines</h3>
	Anthony is paying for them and they aren't meant as permanent development enviornments.
	<br />
	<br />
	It's pretty easy to spin up new virtual machines just like these for yourself that will stick around using <a href="https://www.digitalocean.com/">Digital Ocean</a>. They start at under $0.01 per hour.
</template>
